<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn PWA</title>
    <link rel="manifest" href="/app.webmanifest" />
    <link rel="stylesheet" href="./index.css">
</head>

<body>
    <div>Hello PWA</div>
    <script>
        console.log(navigator)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(
                    registration => {
                        console.log("注册service Worker", registration)
                    },
                    error => {
                        console.log(error)
                    }
                )
        }
    </script>
    <script>
        let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                // Prevents the default mini-infobar or install dialog from appearing on mobile
                e.preventDefault();
                // Save the event because you'll need to trigger it later.
                deferredPrompt = e;
                // Show your customized install prompt for your PWA
                // Your own UI doesn't have to be a single element, you
                // can have buttons in different locations, or wait to prompt
                // as part of a critical journey.
                showInAppInstallPromotion();
            });
    </script>
</body>

</html>
